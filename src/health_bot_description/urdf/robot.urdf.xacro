<?xml version="1.0"?>
<robot name="health_bot" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <!-- include the inertial-->
    <xacro:include filename="inertials.xacro" />


    <!-- Define the pi constants -->
    <xacro:property name="pi" value="3.14159265359" />
    <!-- define the body dimension-->
    <xacro:property name="a" value="1" />
    <xacro:property name="b" value="0.3" />
    <xacro:property name="c" value="0.6" />
    <!-- define the wheel and the caster dimensions-->
    <!-- define the wheel and the caster radius-->
    <xacro:property name="r" value="0.15"/>
    <!-- define the wheel width-->
    <xacro:property name="d" value="0.1"/>

    <xacro:property name="s1" value="${b/2+r}"/>
    <xacro:property name="s2" value="${2 * r}"/>
    <xacro:property name="s3" value="${2*r}"/>
    <xacro:property name="s4" value="${c/2+d/2}"/>
<!--##################################################-->
<!--   here additional file will be needed for the robot gazebo we will come back here-->
<!--  we need this link otherwise gazebo will complain-->
 <xacro:include filename="robot.gazebo" />
<link name="base_footprint"></link>
<joint name="base_footprint_joint" type="fixed">
    <parent link="base_footprint" />
    <child link="body_link" />
</joint>
<!-- the above is just the fictious link fo the robot -->
<!-- below is the body link of the robot-->
<link name="body_link">
    <visual>
<origin rpy="0 0 0" xyz="0 0 ${s1}"/>
    <geometry>
        <box size="${a} ${b} ${c}" />
    </geometry>
    <!-- here the displacement an dthe orientation of the geometric center of the link with respect to the link-->
</visual>
<collision>
<origin rpy="0 0 0" xyz="0 0 ${s1}"/>
    <geometry>
        <box size="${a} ${b} ${c}" />
    </geometry>
    <!-- here the displacement an dthe orientation of the geometric center of the link with respect to the link-->
</collision>
<xacro:inertial_body />
</link>

<!-- the next step is for the  back right wheel of the robot and the joint-->

<joint name="wheel1_joint" type="continuous">
    <parent link="body_link" />
    <child link="wheel1_link" />
    <origin xyz="${-s2} ${-s4} ${r}" rpy="0 0 0" />
    <axis xyz="0 1 0" />
    <limit effort="50000" velocity="10" />
    <dynamics damping="1.0" friction="1.0" />
</joint>

<link name="wheel1_link">
    <visual>
       <origin rpy="1.570795 0 0" xyz="0 0 0"/>
        <geometry>
            <cylinder radius="${r}" length="${d}" />
        </geometry>
        <!-- here the displacement an dthe orientation of the geometric center of the link with respect to the link-->
    </visual>
    <collision>
        <origin rpy="1.570795 0 0" xyz="0 0 0"/>
        <geometry>
            <cylinder radius="${r}" length="${d}" />
        </geometry>
        <!-- here the displacement an dthe orientation of the geometric center of the link with respect to the link-->
    </collision>
    <xacro:inertial_wheel />
</link>
    
<!-- the left wheel is the next one -->  
<joint name="wheel2_joint" type="continuous">
    <parent link="body_link" />
    <child link="wheel2_link" />
    <origin xyz="${-s2} ${s4} ${r}" rpy="0 0 0" />
    <axis xyz="0 1 0" />
    <limit effort="50000" velocity="10" />
    <dynamics damping="1.0" friction="1.0" />
</joint>
<link name="wheel2_link">
    <visual>
        <origin rpy="1.570795 0 0" xyz="0 0 0"/>
        <geometry>
            <cylinder radius="${r}" length="${d}" />
        </geometry>
    </visual>
    <collision>
        <origin rpy="1.570795 0 0" xyz="0 0 0"/>
        <geometry>
            <cylinder radius="${r}" length="${d}" />
        </geometry>
    </collision>
    <xacro:inertial_wheel />
</link>
<!-- for the caster wheel -->  
<joint name="caster_joint" type="fixed">
    <parent link="body_link" />
    <child link="caster_link" />
    <origin xyz="${s3} 0 ${r}" rpy="0 0 0" />
</joint>
<link name="caster_link">
    <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
            <sphere radius="${r}" />
        </geometry>
    </visual>
    <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
            <sphere radius="${r}" />
        </geometry>
    </collision>
    <xacro:inertial_caster />
</link>
</robot>

